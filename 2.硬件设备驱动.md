# Author: maodun
# Modifydate: 2025.7.7
# Reference Wiki: [Archlinux Wiki](https://wiki.archlinux.org/)
            	  [Linux Kernel](https://kernel.org/)
            	  [GNU](https://www.gnu.org/)



# 目录
# [1 网络连接](#1-网络设备)
	- ## [1.1 网络连接](#11-网络连接)
	- ## [1.2 ssh连接](#12-ssh连接)
	- ## [1.3 ssh管理](#13-ssh管理)
# [2 处理器设备](#2-处理器设备)
# [3 显卡设备](#3-显卡设备)
# [4 声音设备](#4-声音设备)
# [5 蓝牙设备](#5-蓝牙设备) 
# [6 屏幕设备](#6-屏幕设备)
# [7 电池设备](#7-电池设备)
# [8 磁盘设备](#8-磁盘设备)
	- ## [8.1 自动清理缓存包](#81-自动清理缓存包)
	- ## [8.2 挂载NTFS格式U盘](#82-挂载ntfs格式u盘)



# 1 网络设备  
## 1.1 网络连接
通过**networkmanager**软件,按以下步骤连接网络
	1. 系统自启动软件  
  		`$ sudo systemctl enable --now NetworkManager`   
	2. 使用tui工具连接WiFi  
  		`$ nmtui`


## 1.2 ssh连接
通过**openssh**软件,按以下步骤连接网络  
	1. 下载openssh软件  
  		`$ sudo pacman -S openssh`
	2. 系统自启动软件  
  		`$ sudo systemctl enable --now sshd`  
	3. 生成密钥对  
    		1. 创建并进入～/.ssh 目录
    		2. 生产密钥对
    			`$ ssh-keygen -t ed25519 -C Email地址`  
    		3. 输入存储密钥的文件名称"key"
    		4. 输入保护密钥的密码  
    		5. 查看生成的密钥  
      			- 文件名(私钥)  
      			- 文件名_pub(公钥)  
	4. 将公钥输入要连接的端上  
	5. 使用[ssh命令]连接远程端  
  		`$ ssh url`


## 1.3 ssh管理
查询ssh状态:
	- 查询本机ssh协议状态
  		`$ ps -e | grep ssh`
	- 查询ssh服务状态
  		`$ systemctl status sshd`

使用ssh-agent管理私钥,将私钥密码给ssh-agent管理后,后续会通过代理自动输入私钥,无需重复输入私钥:  
	1. 让shh-agent在后台运行  
  		`$ eval "$(ssh-agent -s)"`  
	2. 添加私钥到ssh-agent  
  		`$ ssh-add -t 1h ~/.ssh/钥匙名称`
	3. 清除加载到ssh-agent的密钥
  		`$ ssh-add -D`

通过bash配置文件(.bashrc)配置命令别名
  	`alias rsa='eval "$(ssh-agent -s)"`
  	`alias asa='ssh-add -t 1h ~/.ssh/key'`
  	`alias dsa='ssh-add -D'`

> 避免在多用户系统或不受信任的系统上使用ssh-agent.
> "eval"命令会让该命令只在当前shell下生效,当退出该shell时,此次命令效果失效
> "ssh-add -t": 为添加到 ssh-agent 的密钥设置一个有效期（例如 ssh-add -t 4h 表示 4 小时）

           
  
# 2 处理器设备
安装amd-cpu的微码处理器  
	`$ sudo pacman -S amd-ucode`  


   
# 3 显卡设备  
通过[页面](https://wiki.archlinux.org/title/Xorg)查看本机显卡型号并查询相应显卡驱动
	`$ lspci -v | grep -A1 -e VGA -e 3D`  

安装驱动以运行使用OpenGL的软件 
	`$ sudo pacman -S mesa`  

安装驱动以运行使用Vulkan的软件
	`$ sudo pacman -S vulkan-nouveau vulkan-radeon`  



# 4 声音设备
下载与启动相关驱动
	1. 安装声音驱动  
  		`$ sudo pacman -S pipewire pipewire-audio pipewire-alsa pipewire-pulse pipewire-jack`
	2. 重启启动驱动
    		1.重启电脑
    		2.启动驱动，运行以下命令直到显示出设备信息
    			`$ wpctl status`

通过**wpctl**命令控制声音相关:
	1. 获取当前声卡设备情况  
  		`$ wpctl status`  
	2. 获取声卡音量  
  		`$ wpctl get-volume @DEFAULT_AUDIO_SINK@`  
	3. 调节声卡音量  
  		`$ wpctl set-volume @DEFAULT_AUDIO_SINK@ 1.0(设置为百分百音量)/0.1+(增加百分10音量)`  
	4. 控制声卡是否静音 
  		`$ wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle` 
	5. 控制麦克风是否静音
  		`$ wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle`

> 要使用默认声卡可输入@DEFAULT_AUDIO_SINK@


 
# 5 蓝牙设备
安装驱动
	`$ sudo pacman -S bluez bluez-utils`

通过以下步骤连接蓝牙设备:  
	1. 查询系统蓝牙服务状态  
  		`$ sudo systemctl status bluetooth`  
	2. 系统自启动蓝牙服务  
  		`$ sudo systemctl enable --now bluetooth`  
	3. 进入[bluetooth]界面  
  		`$ bluetoothctl`  
	4. 寻找可用蓝牙设备  
  		`[bluetooth]> scan on`   
	5. 停止寻找可用蓝牙设备
  		`[bluetooth]> scan off`
	6. 配对设备  
  		`[bluetooth]> pair 设备的MAC_adress`  
	7. 信任设备  
  		`[bluetooth]> trust 设备的MAC_adress`  
	8. 连接设备  
  		`[bluetooth]> connect 设备的MAC_adress`
	9. 查询曾经连接过的设备
  		`[bluetooth]> device`

> 可选择输入部分MAC_adress并按"tab"键补全


  
# 6 屏幕设备  
安装亮度管理软件  
	`$ sudo pacman -S brightnessctl`  

使用**brightnessctl**命令管理屏幕亮度:  
	`$ brightnessctl set 百分比/+百分比(增加百分比亮度)`  


  
# 7 电池设备  
安装电池管理软件  
	`$ sudo pacman -S tlp`  

设置随系统自启动
	`$ sudo systemctl enable --now tlp.service`

打开并编辑tlp文件配置文件"/etc/tlp.conf",去掉"# STOP_CHARGE_THRESH_BAT0=80"前的注释符号,设置充电80停止.  
	`$ sudo helix /etc/tlp.conf`



# 8 磁盘设备  
## 8.1 自动清理缓存包
查询当前缓存包  
	`$ cd /var/cache/pacman/pkg`
  
安装**pacman-contrib**软件并启动自动清除缓存包  
	`$ sudo pacman -S pacman-contrib`  
	`$ sudo systemctl enable --now paccache.timer`


## 8.2 挂载exfat格式U盘  
按以下步骤进行:    
  	1. 查看要挂载U盘名称  
  		`$ sudo fdisk -l`  
  	2. 挂载U盘到挂载点  
  		`$ sudo mount -t extfat -o /dev/“U盘分区名称” /“挂载路径" --mkdir`
  	3. 取消挂载  
  		`$ sudo umount -l “/挂载路径” ` 

挂载命令示例：
	`sudo mount -t exfat -o uid=$(id -u),gid=$(id -g),umask=022 /dev/sda1 /mnt`
取消挂载命令示例：
	`sudo umount -l /mnt`

通过bash配置文件(.bashrc)配置命令别名
  	`alias mount='sudo mount -t exfat -o uid=$(id -u),gid=$(id -g),umask=022 /dev/sda1 /mnt'
  	`alias umount='sudo umount -l /mnt'
